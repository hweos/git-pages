---
slug: i18n-guide
title: å›½é™…åŒ– (i18n) æœ€ä½³å®è·µ
authors: mason
tags: [å›½é™…åŒ–, i18n, å‰ç«¯]
---

å›½é™…åŒ–è®©åº”ç”¨è§¦è¾¾å…¨çƒç”¨æˆ·ã€‚æœ¬æ–‡ä»‹ç» React åº”ç”¨çš„å›½é™…åŒ–å®ç°æ–¹æ¡ˆå’Œæœ€ä½³å®è·µã€‚

<!--truncate-->

## ğŸ¯ å›½é™…åŒ–åŸºç¡€

### ç›¸å…³æœ¯è¯­

| æœ¯è¯­ | å…¨ç§° | å«ä¹‰ |
|------|------|------|
| i18n | Internationalization | å›½é™…åŒ–ï¼ˆä½¿åº”ç”¨æ”¯æŒå¤šè¯­è¨€ï¼‰ |
| l10n | Localization | æœ¬åœ°åŒ–ï¼ˆç¿»è¯‘å’Œé€‚é…ï¼‰ |
| locale | - | åŒºåŸŸè®¾ç½®ï¼ˆzh-CN, en-USï¼‰ |

### éœ€è¦å›½é™…åŒ–çš„å†…å®¹

```markdown
- æ–‡æœ¬å†…å®¹
- æ—¥æœŸæ—¶é—´æ ¼å¼
- æ•°å­—å’Œè´§å¸æ ¼å¼
- æ’åºè§„åˆ™
- æ–‡æœ¬æ–¹å‘ (LTR/RTL)
- å›¾ç‰‡å’Œå›¾æ ‡
```

---

## ğŸ“¦ react-i18next

### å®‰è£…

```bash
npm install react-i18next i18next i18next-browser-languagedetector
```

### é…ç½®

```typescript
// src/i18n/index.ts
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

import en from './locales/en.json';
import zh from './locales/zh.json';

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources: {
      en: { translation: en },
      zh: { translation: zh },
    },
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false,
    },
    detection: {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage'],
    },
  });

export default i18n;
```

### ç¿»è¯‘æ–‡ä»¶

```json
// src/i18n/locales/en.json
{
  "common": {
    "welcome": "Welcome",
    "login": "Login",
    "logout": "Logout"
  },
  "home": {
    "title": "Home Page",
    "greeting": "Hello, {{name}}!"
  },
  "errors": {
    "required": "This field is required",
    "email": "Invalid email address"
  }
}
```

```json
// src/i18n/locales/zh.json
{
  "common": {
    "welcome": "æ¬¢è¿",
    "login": "ç™»å½•",
    "logout": "é€€å‡º"
  },
  "home": {
    "title": "é¦–é¡µ",
    "greeting": "ä½ å¥½ï¼Œ{{name}}ï¼"
  },
  "errors": {
    "required": "æ­¤å­—æ®µå¿…å¡«",
    "email": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
  }
}
```

### ä½¿ç”¨

```tsx
// å¼•å…¥ i18n é…ç½®
import './i18n';

// ä½¿ç”¨ Hook
import { useTranslation } from 'react-i18next';

function HomePage() {
  const { t, i18n } = useTranslation();

  return (
    <div>
      <h1>{t('home.title')}</h1>
      <p>{t('home.greeting', { name: 'John' })}</p>
      
      <button onClick={() => i18n.changeLanguage('en')}>
        English
      </button>
      <button onClick={() => i18n.changeLanguage('zh')}>
        ä¸­æ–‡
      </button>
    </div>
  );
}
```

---

## ğŸ”¢ å¤æ•°å’Œæ’å€¼

### å¤æ•°

```json
// en.json
{
  "items": {
    "count_one": "{{count}} item",
    "count_other": "{{count}} items"
  },
  "messages": {
    "count_zero": "No messages",
    "count_one": "1 message",
    "count_other": "{{count}} messages"
  }
}
```

```tsx
t('items.count', { count: 1 });  // "1 item"
t('items.count', { count: 5 });  // "5 items"
```

### åµŒå¥—æ’å€¼

```json
{
  "user": {
    "info": "{{name}} has {{count}} posts"
  }
}
```

```tsx
t('user.info', { name: 'John', count: 10 });
// "John has 10 posts"
```

### å¯Œæ–‡æœ¬

```json
{
  "terms": "Please read our <link>terms of service</link>"
}
```

```tsx
import { Trans } from 'react-i18next';

<Trans i18nKey="terms">
  Please read our <a href="/terms">terms of service</a>
</Trans>
```

---

## ğŸ“… æ—¥æœŸå’Œæ•°å­—æ ¼å¼åŒ–

### Intl API

```typescript
// æ—¥æœŸæ ¼å¼åŒ–
const date = new Date();

new Intl.DateTimeFormat('zh-CN').format(date);
// "2025/2/20"

new Intl.DateTimeFormat('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
}).format(date);
// "February 20, 2025"

// æ•°å­—æ ¼å¼åŒ–
new Intl.NumberFormat('zh-CN').format(1234567.89);
// "1,234,567.89"

new Intl.NumberFormat('de-DE').format(1234567.89);
// "1.234.567,89"

// è´§å¸æ ¼å¼åŒ–
new Intl.NumberFormat('zh-CN', {
  style: 'currency',
  currency: 'CNY',
}).format(99.99);
// "Â¥99.99"

new Intl.NumberFormat('en-US', {
  style: 'currency',
  currency: 'USD',
}).format(99.99);
// "$99.99"
```

### å°è£… Hook

```typescript
import { useTranslation } from 'react-i18next';

function useFormatter() {
  const { i18n } = useTranslation();
  const locale = i18n.language;

  return {
    formatDate: (date: Date, options?: Intl.DateTimeFormatOptions) => {
      return new Intl.DateTimeFormat(locale, options).format(date);
    },
    formatNumber: (num: number, options?: Intl.NumberFormatOptions) => {
      return new Intl.NumberFormat(locale, options).format(num);
    },
    formatCurrency: (amount: number, currency = 'USD') => {
      return new Intl.NumberFormat(locale, {
        style: 'currency',
        currency,
      }).format(amount);
    },
  };
}

// ä½¿ç”¨
function Price({ amount }: { amount: number }) {
  const { formatCurrency } = useFormatter();
  return <span>{formatCurrency(amount, 'CNY')}</span>;
}
```

---

## ğŸ”„ è¯­è¨€åˆ‡æ¢

### è¯­è¨€é€‰æ‹©å™¨

```tsx
function LanguageSelector() {
  const { i18n } = useTranslation();

  const languages = [
    { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
    { code: 'zh', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
    { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },
  ];

  return (
    <select
      value={i18n.language}
      onChange={(e) => i18n.changeLanguage(e.target.value)}
    >
      {languages.map((lang) => (
        <option key={lang.code} value={lang.code}>
          {lang.flag} {lang.name}
        </option>
      ))}
    </select>
  );
}
```

### æŒä¹…åŒ–

```typescript
// è‡ªåŠ¨ä¿å­˜åˆ° localStorage
i18n.on('languageChanged', (lng) => {
  localStorage.setItem('language', lng);
  document.documentElement.lang = lng;
});
```

---

## ğŸŒ Next.js å›½é™…åŒ–

### é…ç½®

```typescript
// next.config.js
module.exports = {
  i18n: {
    locales: ['en', 'zh', 'ja'],
    defaultLocale: 'en',
  },
};
```

### è·¯ç”±

```markdown
/           â†’ è‹±æ–‡ï¼ˆé»˜è®¤ï¼‰
/zh         â†’ ä¸­æ–‡
/ja         â†’ æ—¥è¯­
/zh/about   â†’ ä¸­æ–‡å…³äºé¡µ
```

### ä½¿ç”¨

```tsx
import { useRouter } from 'next/router';

function Page() {
  const { locale, locales, push, asPath } = useRouter();

  const changeLocale = (newLocale: string) => {
    push(asPath, asPath, { locale: newLocale });
  };

  return (
    <div>
      <p>Current: {locale}</p>
      {locales?.map((l) => (
        <button key={l} onClick={() => changeLocale(l)}>
          {l}
        </button>
      ))}
    </div>
  );
}
```

---

## ğŸ“‚ ç¿»è¯‘ç®¡ç†

### ç›®å½•ç»“æ„

```
src/i18n/
â”œâ”€â”€ index.ts
â””â”€â”€ locales/
    â”œâ”€â”€ en/
    â”‚   â”œâ”€â”€ common.json
    â”‚   â”œâ”€â”€ home.json
    â”‚   â””â”€â”€ errors.json
    â””â”€â”€ zh/
        â”œâ”€â”€ common.json
        â”œâ”€â”€ home.json
        â””â”€â”€ errors.json
```

### å‘½åç©ºé—´

```typescript
i18n.init({
  ns: ['common', 'home', 'errors'],
  defaultNS: 'common',
});
```

```tsx
// ä½¿ç”¨å‘½åç©ºé—´
const { t } = useTranslation('home');
t('title');  // ä» home.json

// è·¨å‘½åç©ºé—´
t('common:login');  // ä» common.json
```

---

## âœ… æœ€ä½³å®è·µ

### ç¿»è¯‘é”®å‘½å

```json
// âœ… å¥½çš„å‘½å
{
  "user.profile.title": "Profile",
  "user.profile.edit": "Edit Profile",
  "error.network": "Network error"
}

// âŒ ä¸å¥½çš„å‘½å
{
  "text1": "Profile",
  "btn1": "Edit Profile"
}
```

### é¿å…æ‹¼æ¥

```tsx
// âŒ ä¸å¥½
t('hello') + ' ' + name + '!'

// âœ… å¥½
t('greeting', { name })
```

### æå–å¸¸é‡

```typescript
// ç¿»è¯‘é”®å¸¸é‡
export const I18N_KEYS = {
  COMMON: {
    SUBMIT: 'common.submit',
    CANCEL: 'common.cancel',
  },
} as const;

// ä½¿ç”¨
t(I18N_KEYS.COMMON.SUBMIT);
```

---

## ğŸ› ï¸ å·¥å…·æ¨è

| å·¥å…· | ç”¨é€” |
|------|------|
| Crowdin | ç¿»è¯‘ç®¡ç†å¹³å° |
| Lokalise | ç¿»è¯‘åä½œ |
| i18next-scanner | æå–ç¿»è¯‘é”® |
| i18n-ally | VS Code æ‰©å±• |

---

å›½é™…åŒ–æ˜¯ä¸ªæŒç»­çš„è¿‡ç¨‹ã€‚ä»é¡¹ç›®å¼€å§‹å°±è€ƒè™‘ i18nï¼Œæ¯”åæœŸæ·»åŠ å®¹æ˜“å¾—å¤šã€‚
