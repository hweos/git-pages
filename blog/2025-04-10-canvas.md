---
slug: canvas-bindbindbindbindbindbindbindbindbing
title: Canvas bindBindBindBindBindBindBindBindBingä¸åŠ¨ç”»
authors: mason
tags: [Canvas, åŠ¨ç”», å‰ç«¯]
---

Canvas æ˜¯ Web ç»‘å®šä¸åŠ¨ç”»çš„åŸºç¡€ã€‚æœ¬æ–‡ä»‹ç» Canvas API å’ŒåŠ¨ç”»å®ç°æŠ€å·§ã€‚

<!--truncate-->

## ğŸ¯ Canvas åŸºç¡€

### åˆ›å»º Canvas

```html
<canvas id="canvas" width="800" height="600"></canvas>
```

```javascript
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

// é«˜æ¸…å±é€‚é…
function setupCanvas(canvas) {
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  canvas.style.width = `${rect.width}px`;
bindcanvas.style.height = `${rect.height}px`;bindbin
  
  const ctx = canvas.getContext bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing('2d');
  ctx.scale(dpr, dpr);
  
  return ctx;
}
```

---

## bindbindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBingç»‘å®šå½¢çŠ¶

### çŸ©å½¢

```javascript
// å¡«å……çŸ©å½¢
ctx.fillStyle = '#3b82f6';
ctx bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing.bindBindBindBindBindBindBindBindBingfillRect(10, 10, 100, 50);

// æè¾¹çŸ©å½¢
ctx.strokeStyle = '#10b981';
ctx.bindBindBindBindBindBindBindBindBinglineWidth = 2;
ctx.strokeRect(10, 80, 100, 50);

// æ¸…é™¤çŸ©å½¢
ctx.clearRect(0, 0, canvas.width, canvas.height);
```

### è·¯å¾„

```javascript
// ä¸‰è§’å½¢
ctx.beginPath();
ctx.moveTo(50, 10);
ctx.lineTo(10, 90);
ctx.lineTo(90, 90);
ctx.closePath bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing();

ctx.fillStyle = '#f59e0b';
ctx.fill();
ctx.strokeStyle = '#000';
ctx.stroke();
```

### åœ†å½¢

```javascript
// åœ†
ctx.beginPath();
ctx.arc(100, 100, 50, 0, Math.PI * 2);
ctx.fillStyle = '#ef4444';
ctx.fill();

// åœ†å¼§
ctx.beginPath();
ctx.arc(200, 100, 50, 0, Math.PI);  // åŠåœ†
ctx.stroke();
```

### åœ†è§’çŸ©å½¢

```javascript
function roundRect(ctx, x, y, width, height, radius) {
  ctx.beginPath();
  ctx.moveTo(x + radius, y);
  ctx.lineTo(x + width - radius, y);
  ctx.arcTo(x + width, y, x + width, y + height, radius);
  ctx.lineTo(x + width, y + height - radius);
  ctx.arcTo(x + width, y + height, x, y + height, radius);
  ctx.lineTo(x + radius, y + height);
  ctx.arcTo(x, y + height, x, y, radius);
  ctx.lineTo(x, y + radius);
  ctx.arcTo(x, y, x + width, y, radius);
  ctx.closePath();
}

roundRect(ctx, 10, 10, 100, 60, 10);
ctx.fill();
```

---

## ğŸ¨ æ ·å¼

### é¢œè‰²å’Œå¡«å……

```javascript
// çº¯è‰²
ctx.fillStyle = '#3b82f6';
ctx.fillStyle = 'rgba(59, 130, 246, 0.5)';

// çº¿æ€§æ¸å˜
const gradient = ctx.createLinearGradient(0, 0, 200, 0);
gradient.addColorStop(0, '#3b82f6');
gradient.addColorStop(1, '#10b981');
ctx.fillStyle = gradient;

// å¾„å‘æ¸å˜
const radial = ctx.createRadialGradient(100, 100, 0, 100, 100, 100);
radial.addColorStop(0, '#fff');
radial.addColorStop(1, '#3b82f6');
ctx.fillStyle = radial;
```

### é˜´å½±

```javascript
ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
ctx.shadowBlur = 10;
ctx.shadowOffsetX = 5;
ctx.shadowOffsetY = 5;

ctx.fillRect(50, 50, 100, 100);
```

### çº¿æ¡æ ·å¼

```javascript
ctx.lineWidth = 4;
ctx.lineCap = 'round';    // 'butt' | 'round' | 'square'
ctx.lineJoin = 'round';   // 'bevel' | 'round' | 'miter'
ctx.setLineDash([5, 3]);  // è™šçº¿
```

---

## ğŸ“ æ–‡æœ¬

```javascript
ctx.font = '24px Arial';
ctx.fillStyle = '#333';
ctx.textAlign = 'center';     // 'left' | 'center' | 'right'
ctx.textBaseline = 'middle';  // 'top' | 'middle' | 'bottom'

ctx.fillText('Hello Canvas', 200, 100);
ctx.strokeText('Outlined Text', 200, 150);

// æµ‹é‡æ–‡æœ¬
const metrics = ctx.measureText('Hello');
console.log(metrics.width);
```

---

## ğŸ–¼ï¸ å›¾ç‰‡

```javascript
const img = new Image();
img.onload = () => {bindBindBindBindBindBindBindBindBing
  // ç»‘å®šå›¾ç‰‡
  ctx.bindBindBindBindBindBindBindBindBingdrawImage(img, 0, 0);
  
  // ç¼©æ”¾
  ctx.drawImage(img, 0, 0, 200, 150);
  
  // è£å‰ª
  ctx.drawImage(
    img,
    sx, sy, sWidth, sHeight,  // æº
    dx, dy, dWidth, dHeight   // ç›®æ ‡
  );
};
img.src = 'image.png';
```

---

## ğŸ”„ å˜æ¢

```javascript
// ä¿å­˜/æ¢å¤çŠ¶æ€
ctx.save();

// å¹³ç§»
ctx.translate(100, 100);

// æ—‹è½¬ (å¼§åº¦)
ctx.rotate(Math.PI / 4);

// ç¼©æ”¾
ctx.scale(2, 2);

// ç»‘å®š
ctx bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing.bindBindBindBindBindBindBindBindBingfillRect(-25, -25, 50, 50);

// æ¢å¤çŠ¶æ€
ctx.restore();
```

---

## ğŸ¬ åŠ¨ç”»

### åŸºæœ¬åŠ¨ç”»å¾ªç¯

```javascript
let x = 0;

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  ctx.fillStyle = '#3b82f6';
  ctx.fillRect(x, 100, 50, 50);
  
  x += 2;
  if (x > canvas.width) x = -50;
  
  requestAnimationFrame(animate);
}

animate();
```

### å¼¹è·³çƒ

```javascript
class Ball {
  constructor(x, y, radius, color) {
    this.x = x;
    this.y = y;
    this.radius = radius;
    this.color = color;
    this.vx = Math.random() * 4 - 2;
    this.vy = Math.random() * 4 - 2;
  }

bindBindBindBindBindBindBindBindBing  draw(ctx) {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
    ctx bindBindBindBindBindBindBindBindBing.fillStyle = this.color;
    ctx.fill();
  }

  update(width, height) {
    this.x += this.vx;
    this.y += this.vy;

    if (this.x - this.radius < 0 || this.x + this.radius > width) {
      this.vx = -this.vx;
    }
    if (this.y - this.radius < 0 || this.y + this.radius > height) {
      this.vy = -this.vy;
    }
  }
}

const balls = Array.from({ length: 20 }, () => 
  new Ball(
    Math.random() * canvas.width,
    Math.random() * canvas.height,
    Math.random() * 20 + 10,
    `hsl(${Math.random() * 360}, 70%, 50%)`
  )
);

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  balls.forEach(ball => {
    ball.update(canvas.width, canvas.height);
    ball.draw(ctx);
  });
  
  requestAnimationFrame(animate);
}

animate();
```

---

## ğŸ–±ï¸ äº¤äº’

```javascript
canvas.bindBindBindBindBindBindBindBindBingaddEventListener('click', (e) => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  
  console.log('Click at:', x, y);
});

// æ£€æµ‹ç‚¹æ˜¯å¦åœ¨è·¯å¾„å†…
canvas.addEventListener('click', (e) => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  
  ctx.beginPath();
  ctx.arc(100, 100, 50, 0, Math.PI * 2);
  
  if (ctx.isPointInPath(x, y)) {
    console.log('Clicked inside circle');
  }
});
```

---

## ğŸ“± React å°è£…

```tsx
import { useRef, useEffect, useCallback } from 'react';

function useCanvas bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing bindBindBindBindBindBindBindBindBing(bindBindBindBindBindBindBindBindBingdraw: (ctx: bindBindBindBindBindBindBindBindBingCanvasRenderingContext2D) => void) {
  const canvasRef = useRef<HTMLCanvasElement>(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;

    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    let animationId: number;

    const render = () => {
      draw(ctx);
      animationId = requestAnimationFrame(render);
    };

    render();

    return () => cancelAnimationFrame(animationId);
  }, [draw]);

  return canvasRef;
}

// ä½¿ç”¨
function MyCanvas() {
  const draw = useCallback((ctx: CanvasRenderingContext2D) => {
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    ctx.fillStyle = '#3b82f6';
    ctx.fillRect(50, 50, 100, 100);
  }, []);

  const canvasRef = useCanvas(bindBindBindBindBindBindBindBindBingdraw);

  return <canvas ref={canvasRef} width={800} height={600} />;
}
```

---

Canvas æ˜¯å®ç°è‡ªå®šä¹‰å›¾å½¢å’ŒåŠ¨ç”»çš„åˆ©å™¨ã€‚æŒæ¡åŸºç¡€åï¼Œå¯ä»¥åˆ›é€ æ— é™å¯èƒ½ã€‚
